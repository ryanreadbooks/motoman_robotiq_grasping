<launch>

    <!-- 负责进行检测的节点 -->
    <node pkg="detection" type="node_detection.py" name="node_detection" output="screen" required="true" ns="ryan" >
        <!-- 节点私有参数 -->
        <!-- 相机内参 -->
        <param name="model_path" value="/home/ryan/Codes/pythonProject/grasping-repo/paper_grasp_project/light_detection/state_dicts/model.pth"/>
        
        <param name="intrinsics/fx" type="double" value="388.879" />
        <param name="intrinsics/fy" type="double" value="388.879" />
        <param name="intrinsics/cx" type="double" value="325.910" />
        <param name="intrinsics/cy" type="double" value="238.140" />
        <!-- fov的值待确认 -->
        <param name="intrinsics/fov" type="double" value="68" />
    </node>

    <!-- realsense相机节点 -->
    <include file="$(find realsense2_camera)/launch/rs_camera.launch" >
        <arg name="device_type" value="d435"/>
        <arg name="align_depth" value="true"/>

        <arg name="depth_width" value="640"/>
        <arg name="depth_height" value="480"/>
        
        <arg name="color_width" value="640"/>
        <arg name="color_height" value="480"/>
        
        <arg name="enable_pointcloud" value="true"/>
    </include>

    <!-- TF发布：发布相机的外参：这里用的是眼在手上，所以发布相机和机械臂工具末端静态的变换关系 -->
    <!-- TODO 外参标定完成后填入正确的外参关系 -->
    <node name="camera_extrinsic_publisher" pkg="tf" type="static_transform_publisher"  output="screen" respawn="true" args="0.15 0.05 0.05 0 0 0 1 grasping_frame camera_link 50" />        

</launch>